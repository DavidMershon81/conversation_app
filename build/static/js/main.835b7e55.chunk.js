(this.webpackJsonppetition_app=this.webpackJsonppetition_app||[]).push([[0],{38:function(e,t,i){},39:function(e,t,i){},68:function(e,t,i){"use strict";i.r(t);var s=i(1),r=i.n(s),n=i(32),a=i.n(n),c=(i(38),i(39),i(11)),o=i(2),l=i(5),j=i(6),u=i(21),b=i.n(u),d=function(e){var t=e.getUrl,i=e.postUrl,r=e.getRequestParams,n=Object(s.useState)(null),a=Object(j.a)(n,2),c=a[0],o=a[1],u=Object(s.useState)(!0),d=Object(j.a)(u,2),m=d[0],p=d[1],O=Object(s.useState)(!1),x=Object(j.a)(O,2),h=x[0],g=x[1],_=Object(s.useCallback)((function(){p(!0),g(!1);var e={params:r};b.a.get(t,e&&e).then((function(e){o(e.data),p(!1)}),(function(e){p(!1),g(!0)}))}),[t,r]);Object(s.useEffect)((function(){_()}),[_]);var v=function(e,t){p(!0),g(!1),b.a.post(i,e).then((function(e){p(!1),t(e.data)}),(function(e){p(!1),g(!0)}))};return{data:c,getData:_,postData:v,addData:function(e){v(e,(function(e){o([].concat(Object(l.a)(c),[e]))}))},loading:m,error:h}},m=i(12),p=i(16),O=Object(s.createContext)({}),x=i(0),h=function(e){var t=e.varName,i=e.visibleName,r=Object(s.useContext)(O).errors;return null!=r[t]&&"required"===r[t].type?Object(x.jsxs)("span",{className:"form_error_message",children:[i," required!"]}):Object(x.jsx)("span",{})},g=function(e){var t=e.varName,i=e.visibleName,r=e.type,n=Object(s.useContext)(O).register,a={required:!0};return Object(x.jsxs)(x.Fragment,{children:["textarea"===r?Object(x.jsx)("textarea",Object(p.a)({rows:"10",className:"form_text_area",placeholder:i},n(t,a))):Object(x.jsx)("input",Object(p.a)({className:"form_text_input",type:r,placeholder:i},n(t,a))),Object(x.jsx)(h,{varName:t,visibleName:i})]})},_=function(e){var t=e.varName,i=e.valueName,r=e.valueText,n=e.onClick,a=Object(s.useContext)(O).register;return Object(x.jsxs)("label",{className:"form_checkbox_container",children:[Object(x.jsx)("input",Object(p.a)(Object(p.a)({},a(t,{required:!0})),{},{type:"radio",value:i,onClick:function(){n(i)}})),r,Object(x.jsx)("span",{className:"checkmark"})]})},v=function(e){var t=e.varName,i=e.visibleName,s=e.buttonsConfig,r=e.onClick;return Object(x.jsxs)("fieldset",{className:"form_radio_button_set",children:[s.map((function(e){var i=e.valueName,s=e.valueText;return Object(x.jsx)(_,{varName:t,valueName:i,valueText:s,onClick:r},i)})),Object(x.jsx)(h,{varName:t,visibleName:i})]})},f=function(e){var t=e.varName,i=e.varValue,r=Object(s.useContext)(O).register;return Object(x.jsx)("input",Object(p.a)({type:"hidden",value:i},r(t)))},N=function(e){var t=e.onSubmit,i=Object(m.a)(),s=i.register,r=i.handleSubmit,n=i.formState.errors;return Object(x.jsxs)("form",{className:"input_form",onSubmit:r((function(e){t(e)})),children:[Object(x.jsxs)(O.Provider,{value:{register:s,errors:n},children:[Object(x.jsx)(g,{type:"email",varName:"email",visibleName:"email"}),Object(x.jsx)(g,{type:"password",varName:"password",visibleName:"password"}),Object(x.jsx)(g,{type:"text",varName:"first_name",visibleName:"first name"}),Object(x.jsx)(g,{type:"text",varName:"last_name",visibleName:"last name"})]}),Object(x.jsx)("input",{className:"form_submit_btn",type:"submit",value:"Add New User"})]})},S=function(){var e=d({getUrl:"/api/users",postUrl:"/api/users"}),t=e.data,i=e.addData,s=e.loading,r=e.error;return Object(x.jsxs)("section",{children:[Object(x.jsx)("h2",{children:"Users"}),Object(x.jsx)(N,{onSubmit:i}),(s||r)&&Object(x.jsxs)("div",{className:"loading_box",children:[s&&Object(x.jsx)("p",{children:"Loading..."}),r&&Object(x.jsx)("p",{children:"error: can't connect to server."})]}),Object(x.jsx)("ul",{className:"users_list_group",children:t&&t.map((function(e){return Object(x.jsxs)("li",{className:"users_list_item",children:["id:",e.id," | ",e.email,Object(x.jsx)("br",{}),e.first_name," ",e.last_name]},e.id)}))})]})},P=function(e){var t=e.onBtnClick;return Object(x.jsx)(v,{varName:"email_type",visibleName:"email notification type",buttonsConfig:[{valueName:"listserv",valueText:"Send petition to a single mailing list"},{valueName:"custom_emails",valueText:"Send petition to a list of email addresses"}],onClick:t})},y=function(){var e=Object(s.useContext)(O),t=e.unregister,i=e.watch,r=Object(s.useState)([]),n=Object(j.a)(r,2),a=n[0],c=n[1],o=i("email_type"),u=function(){var e="custom_email_".concat(a.length);c([].concat(Object(l.a)(a),[e]))};return Object(x.jsxs)("fieldset",{className:"notification_emails_section",children:[Object(x.jsx)(P,{onBtnClick:function(e){"listserv"===e?(t(a),c([])):"custom_emails"===e&&(t(["listserv_email"]),a.length<1&&u())}}),"custom_emails"===o&&Object(x.jsxs)("fieldset",{className:"notification_emails_section",children:[a.map((function(e){return Object(x.jsx)(g,{type:"email",varName:e,visibleName:e},e)})),Object(x.jsx)("input",{className:"add_email_button",type:"button",onClick:u,value:"Add Another Email"})]}),"listserv"===o&&Object(x.jsx)("fieldset",{className:"notification_emails_section",children:Object(x.jsx)(g,{type:"email",varName:"listserv_email",visibleName:"mailing list email"})})]})},C=function(e){var t=e.onSubmit,i=Object(m.a)(),s=i.register,r=i.unregister,n=i.handleSubmit,a=i.formState.errors,c=i.watch;return Object(x.jsxs)("form",{className:"input_form",onSubmit:n((function(e){console.log(e),t(e)})),children:[Object(x.jsxs)(O.Provider,{value:{register:s,unregister:r,watch:c,errors:a},children:[Object(x.jsx)(g,{type:"text",varName:"group_name",visibleName:"group name"}),Object(x.jsx)(y,{})]}),Object(x.jsx)("input",{className:"form_submit_btn",type:"submit",value:"Create New Petition Group"})]})},U=function(e){var t=e.loading,i=e.error;return Object(x.jsx)(x.Fragment,{children:(t||i)&&Object(x.jsxs)("div",{className:"loading_box",children:[t&&Object(x.jsx)("p",{children:"Loading..."}),i&&Object(x.jsx)("p",{children:"error: can't connect to server."})]})})},w=function(){var e=d({getUrl:"/api/petition_groups",postUrl:"/api/petition_groups"}),t=e.data,i=e.addData,s=e.loading,r=e.error;return Object(x.jsxs)("section",{children:[Object(x.jsx)("h2",{children:"Petition Groups"}),Object(x.jsx)(C,{onSubmit:i}),Object(x.jsx)(U,{loading:s,error:r}),Object(x.jsx)("ul",{className:"petition_groups_list_group",children:t&&t.map((function(e){return Object(x.jsxs)("li",{className:"petition_groups_list_item",children:[Object(x.jsx)(c.b,{className:"petition_groups_list_btn",to:"/petition_group/".concat(e.id),children:"View"}),Object(x.jsxs)("span",{children:["id:",e.id]}),Object(x.jsx)("span",{children:e.group_name})]},e.id)}))})]})},k=function(e){var t=e.onSubmit,i=e.petitionGroupId,s=Object(m.a)(),r=s.register,n=s.unregister,a=s.handleSubmit,c=s.formState.errors,o=s.watch;return Object(x.jsxs)("form",{className:"input_form",onSubmit:a((function(e){console.log(e),t(e)})),children:[Object(x.jsxs)(O.Provider,{value:{register:r,unregister:n,watch:o,errors:c},children:[Object(x.jsx)(g,{type:"text",varName:"subject",visibleName:"subject"}),Object(x.jsx)(g,{type:"textarea",varName:"petition_text",visibleName:"petition text"}),Object(x.jsx)(f,{varName:"petition_group_id",varValue:i})]}),Object(x.jsx)("input",{className:"form_submit_btn",type:"submit",value:"Add New Petition"})]})},F=function(e){var t=e.petitionGroupId,i=Object(s.useRef)({petition_group_id:t}),r=d({getUrl:"/api/petitions",postUrl:"/api/petitions",getRequestParams:i.current}),n=r.data,a=r.addData,o=r.loading,l=r.error;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("br",{}),Object(x.jsx)("strong",{children:"Petitions"}),Object(x.jsx)(U,{loading:o,error:l}),Object(x.jsx)(k,{petitionGroupId:t,onSubmit:a}),Object(x.jsx)("ul",{className:"petitions_list_group",children:n&&n.length>0?n.map((function(e,t){return Object(x.jsxs)("li",{className:"petitions_list_item",children:[Object(x.jsx)(c.b,{className:"petitions_list_btn",to:"/petitions/".concat(e.id),children:"View"}),Object(x.jsxs)("span",{children:["Subject: ",e.subject]})]},t)})):Object(x.jsx)("p",{children:"This group has no petition yet."})})]})},G=function(e){var t=e.petitionGroupId,i=Object(s.useRef)({petition_group_id:t}),r=d({getUrl:"/api/members",getRequestParams:i.current}),n=r.data,a=r.loading,c=r.error;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("br",{}),Object(x.jsx)("strong",{children:"Members"}),Object(x.jsx)(U,{loading:a,error:c}),Object(x.jsx)("ul",{className:"users_list_group",children:n&&n.length>0?n.map((function(e){return Object(x.jsx)("li",{className:"users_list_item",children:e.email},e.email)})):Object(x.jsx)("p",{children:"This group has no members yet."})})]})},T=function(e){var t=e.petitionGroup;return Object(x.jsxs)("p",{children:[Object(x.jsx)("strong",{children:"id:"})," ",t.id,Object(x.jsx)("br",{}),Object(x.jsx)("strong",{children:"listserv_email:"})," ",t.listserv_email,Object(x.jsx)("br",{})]})},q=function(e){var t=e.basePath,i=Object(o.e)().pathname.replace(t,""),s=d({getUrl:"/api/petition_groups/".concat(i)}),r=s.data,n=s.loading,a=s.error;return Object(x.jsxs)("section",{children:[Object(x.jsx)(U,{loading:n,error:a}),r&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("h2",{children:["Petition Group: ",r.group_name]}),Object(x.jsx)(T,{petitionGroup:r}),Object(x.jsx)(G,{petitionGroupId:i}),Object(x.jsx)(F,{petitionGroupId:r.id})]})]})},D=function(e){var t=e.basePath,i=Object(o.e)().pathname.replace(t,"");return Object(x.jsxs)("section",{children:[Object(x.jsx)("h3",{children:"Testing Variable Paths"}),Object(x.jsxs)("p",{children:["subpath: ",i," "]})]})},I=function(e){var t=e.onSubmit,i=e.petition,s=e.user,r=Object(m.a)(),n=r.register,a=r.unregister,c=r.handleSubmit,o=r.formState.errors,l=r.watch,j="Sign Petition as ".concat(s.email);return Object(x.jsxs)("form",{className:"input_form",onSubmit:c((function(e){t(e)})),children:[Object(x.jsxs)(O.Provider,{value:{register:n,unregister:a,watch:l,errors:o},children:[Object(x.jsx)(g,{type:"number",varName:"reveal_threshold",visibleName:"reveal threshold"}),Object(x.jsx)(f,{varName:"petition_id",varValue:i.id}),Object(x.jsx)(f,{varName:"user_id",varValue:s.id})]}),Object(x.jsx)("input",{className:"form_submit_btn",type:"submit",value:j})]})},R=function(e){var t=e.petition,i=e.onSignatureSubmit,s=e.users,r=e.loading,n=e.error;return Object(x.jsxs)("section",{children:[Object(x.jsx)(U,{loading:r,error:n}),s&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("h4",{children:"Users Who Can Sign"}),Object(x.jsxs)("ul",{className:"test_signature_user_group",children:[s&&s.map((function(e){return Object(x.jsxs)("li",{className:"users_list_item test_signature_user_box",children:[Object(x.jsxs)("p",{children:["id:",e.id," | ",e.email," | ",e.first_name," ",e.last_name]}),Object(x.jsx)(I,{onSubmit:i,petition:t,user:e})]},e.id)})),s&&s.length<1&&Object(x.jsx)("li",{children:"No users can sign this petition."})]})]})]})},V=function(e){var t=e.petition,i=Object(s.useRef)({petition_id:t.id}),r=d({getUrl:"/api/signatures",getRequestParams:i.current,postUrl:"/api/signatures"}),n=r.data,a=r.addData,c=r.loading,o=r.error,l=Object(s.useRef)(t?{petition_group_id:t.petition_group_id}:{}),j=d({getUrl:"/api/users",getRequestParams:l.current}),u=j.data,b=j.uLoading,m=j.uError,p=function(e){return u.filter((function(t){return t.id==e.user_id}))[0]};return Object(x.jsxs)("section",{children:[Object(x.jsx)(U,{loading:c,error:o}),n&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("h4",{children:"Signatures"}),Object(x.jsxs)("ul",{className:"test_signature_user_group",children:[n&&u&&n.map((function(e){return Object(x.jsxs)("li",{className:"users_list_item test_signature_user_box",children:[Object(x.jsxs)("span",{children:["id:",e.id]}),Object(x.jsxs)("span",{children:["petition_id:",e.petition_id]}),Object(x.jsxs)("span",{children:["user_id:",e.user_id]}),Object(x.jsxs)("span",{children:["reveal_threshold:",e.reveal_threshold]}),Object(x.jsxs)("span",{children:["email:",p(e).email]})]},e.id)})),n&&n.length<1&&Object(x.jsx)("li",{children:"Nobody has signed this petition."})]}),Object(x.jsx)(R,{petition:t,onSignatureSubmit:function(e){console.log("onSignatureSubmit"),console.log(e),a(e)},users:u,loading:b,error:m})]})]})},A=function(e){var t=e.basePath,i=Object(o.e)().pathname.replace(t,""),s=d({getUrl:"/api/petitions/".concat(i)}),r=s.data,n=s.loading,a=s.error;return Object(x.jsxs)("section",{children:[Object(x.jsx)(U,{loading:n,error:a}),r&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("h2",{children:["Petition: ",r.subject]}),Object(x.jsxs)("p",{children:["Petition Text: ",r.petition_text]}),Object(x.jsx)(V,{petition:r})]})]})},L=function(){return Object(x.jsx)(c.a,{children:Object(x.jsxs)("div",{className:"App",children:[Object(x.jsx)("h1",{children:"Petition App Debug UI"}),Object(x.jsxs)("nav",{className:"top_nav",children:[Object(x.jsx)(c.b,{className:"nav_link",to:"/users",children:"Users"}),Object(x.jsx)(c.b,{className:"nav_link",to:"/petition_groups",children:"Petition Groups"})]}),Object(x.jsx)(o.a,{path:"/petition_groups",exact:!0,component:w}),Object(x.jsx)(o.a,{path:"/petition_group/",render:function(){return Object(x.jsx)(q,{basePath:"/petition_group/"})}}),Object(x.jsx)(o.a,{path:"/petitions/",render:function(){return Object(x.jsx)(A,{basePath:"/petitions/"})}}),Object(x.jsx)(o.a,{path:"/users",exact:!0,component:S}),Object(x.jsx)(o.a,{path:"/testpath/",render:function(){return Object(x.jsx)(D,{basePath:"/testpath/"})}})]})})},B=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,69)).then((function(t){var i=t.getCLS,s=t.getFID,r=t.getFCP,n=t.getLCP,a=t.getTTFB;i(e),s(e),r(e),n(e),a(e)}))};a.a.render(Object(x.jsx)(r.a.StrictMode,{children:Object(x.jsx)(L,{})}),document.getElementById("root")),B()}},[[68,1,2]]]);
//# sourceMappingURL=main.835b7e55.chunk.js.map