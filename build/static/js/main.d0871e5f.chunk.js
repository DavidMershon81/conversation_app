(this.webpackJsonppetition_app=this.webpackJsonppetition_app||[]).push([[0],{38:function(e,t,i){},39:function(e,t,i){},68:function(e,t,i){"use strict";i.r(t);var r=i(0),s=i.n(r),n=i(32),a=i.n(n),c=(i(38),i(39),i(11)),o=i(2),l=i(5),j=i(6),u=i(21),b=i.n(u),m=function(e){var t=e.getUrl,i=e.postUrl,s=e.getRequestParams,n=Object(r.useState)(null),a=Object(j.a)(n,2),c=a[0],o=a[1],u=Object(r.useState)(!0),m=Object(j.a)(u,2),p=m[0],d=m[1],O=Object(r.useState)(!1),x=Object(j.a)(O,2),h=x[0],v=x[1],g=Object(r.useCallback)((function(){d(!0),v(!1);var e={params:s};b.a.get(t,e&&e).then((function(e){o(e.data),d(!1)}),(function(e){d(!1),v(!0)}))}),[t,s]);Object(r.useEffect)((function(){g()}),[g]);var _=function(e,t){d(!0),v(!1),b.a.post(i,e).then((function(e){d(!1),t(e.data)}),(function(e){d(!1),v(!0)}))};return{data:c,getData:g,postData:_,addData:function(e){_(e,(function(e){o([].concat(Object(l.a)(c),[e]))}))},loading:p,error:h}},p=i(15),d=i(16),O=Object(r.createContext)({}),x=i(1),h=function(e){var t=e.varName,i=e.visibleName,s=Object(r.useContext)(O).errors;return null!=s[t]&&"required"===s[t].type?Object(x.jsxs)("span",{className:"form_error_message",children:[i," required!"]}):Object(x.jsx)("span",{})},v=function(e){var t=e.varName,i=e.visibleName,s=e.type,n=Object(r.useContext)(O).register,a={required:!0};return Object(x.jsxs)(x.Fragment,{children:["textarea"===s?Object(x.jsx)("textarea",Object(d.a)({rows:"10",className:"form_text_area",placeholder:i},n(t,a))):Object(x.jsx)("input",Object(d.a)({className:"form_text_input",type:s,placeholder:i},n(t,a))),Object(x.jsx)(h,{varName:t,visibleName:i})]})},g=function(e){var t=e.varName,i=e.valueName,s=e.valueText,n=e.onClick,a=Object(r.useContext)(O).register;return Object(x.jsxs)("label",{className:"form_checkbox_container",children:[Object(x.jsx)("input",Object(d.a)(Object(d.a)({},a(t,{required:!0})),{},{type:"radio",value:i,onClick:function(){n(i)}})),s,Object(x.jsx)("span",{className:"checkmark"})]})},_=function(e){var t=e.varName,i=e.visibleName,r=e.buttonsConfig,s=e.onClick;return Object(x.jsxs)("fieldset",{className:"form_radio_button_set",children:[r.map((function(e){var i=e.valueName,r=e.valueText;return Object(x.jsx)(g,{varName:t,valueName:i,valueText:r,onClick:s},i)})),Object(x.jsx)(h,{varName:t,visibleName:i})]})},f=function(e){var t=e.varName,i=e.varValue,s=Object(r.useContext)(O).register;return Object(x.jsx)("input",Object(d.a)({type:"hidden",value:i},s(t)))},N=function(e){var t=e.onSubmit,i=Object(p.a)(),r=i.register,s=i.handleSubmit,n=i.formState.errors;return Object(x.jsxs)("form",{className:"input_form",onSubmit:s((function(e){t(e)})),children:[Object(x.jsxs)(O.Provider,{value:{register:r,errors:n},children:[Object(x.jsx)(v,{type:"email",varName:"email",visibleName:"email"}),Object(x.jsx)(v,{type:"password",varName:"password",visibleName:"password"}),Object(x.jsx)(v,{type:"text",varName:"first_name",visibleName:"first name"}),Object(x.jsx)(v,{type:"text",varName:"last_name",visibleName:"last name"})]}),Object(x.jsx)("input",{className:"form_submit_btn",type:"submit",value:"Add New User"})]})},y=function(){var e=m({getUrl:"/api/users",postUrl:"/api/users"}),t=e.data,i=e.addData,r=e.loading,s=e.error;return Object(x.jsxs)("section",{children:[Object(x.jsx)("h2",{children:"Users"}),Object(x.jsx)(N,{onSubmit:i}),(r||s)&&Object(x.jsxs)("div",{className:"loading_box",children:[r&&Object(x.jsx)("p",{children:"Loading..."}),s&&Object(x.jsx)("p",{children:"error: can't connect to server."})]}),Object(x.jsx)("ul",{className:"users_list_group",children:t&&t.map((function(e){return Object(x.jsxs)("li",{className:"users_list_item",children:["id:",e.id," | ",e.email,Object(x.jsx)("br",{}),e.first_name," ",e.last_name]},e.id)}))})]})},S=function(e){var t=e.onBtnClick;return Object(x.jsx)(_,{varName:"email_type",visibleName:"email notification type",buttonsConfig:[{valueName:"listserv",valueText:"Send petition to a single mailing list"},{valueName:"custom_emails",valueText:"Send petition to a list of email addresses"}],onClick:t})},C=function(){var e=Object(r.useContext)(O),t=e.unregister,i=e.watch,s=Object(r.useState)([]),n=Object(j.a)(s,2),a=n[0],c=n[1],o=i("email_type"),u=function(){var e="custom_email_".concat(a.length);c([].concat(Object(l.a)(a),[e]))};return Object(x.jsxs)("fieldset",{className:"notification_emails_section",children:[Object(x.jsx)(S,{onBtnClick:function(e){"listserv"===e?(t(a),c([])):"custom_emails"===e&&(t(["listserv_email"]),a.length<1&&u())}}),"custom_emails"===o&&Object(x.jsxs)("fieldset",{className:"notification_emails_section",children:[a.map((function(e){return Object(x.jsx)(v,{type:"email",varName:e,visibleName:e},e)})),Object(x.jsx)("input",{className:"add_email_button",type:"button",onClick:u,value:"Add Another Email"})]}),"listserv"===o&&Object(x.jsx)("fieldset",{className:"notification_emails_section",children:Object(x.jsx)(v,{type:"email",varName:"listserv_email",visibleName:"mailing list email"})})]})},P=function(e){var t=e.onSubmit,i=Object(p.a)(),r=i.register,s=i.unregister,n=i.handleSubmit,a=i.formState.errors,c=i.watch;return Object(x.jsxs)("form",{className:"input_form",onSubmit:n((function(e){console.log(e),t(e)})),children:[Object(x.jsxs)(O.Provider,{value:{register:r,unregister:s,watch:c,errors:a},children:[Object(x.jsx)(v,{type:"text",varName:"group_name",visibleName:"group name"}),Object(x.jsx)(C,{})]}),Object(x.jsx)("input",{className:"form_submit_btn",type:"submit",value:"Create New Petition Group"})]})},k=function(e){var t=e.loading,i=e.error;return Object(x.jsx)(x.Fragment,{children:(t||i)&&Object(x.jsxs)("div",{className:"loading_box",children:[t&&Object(x.jsx)("p",{children:"Loading..."}),i&&Object(x.jsx)("p",{children:"error: can't connect to server."})]})})},w=function(){var e=m({getUrl:"/api/petition_groups",postUrl:"/api/petition_groups"}),t=e.data,i=e.addData,r=e.loading,s=e.error;return Object(x.jsxs)("section",{children:[Object(x.jsx)("h2",{children:"Petition Groups"}),Object(x.jsx)(P,{onSubmit:i}),Object(x.jsx)(k,{loading:r,error:s}),Object(x.jsx)("ul",{className:"petition_groups_list_group",children:t&&t.map((function(e){return Object(x.jsxs)("li",{className:"petition_groups_list_item",children:[Object(x.jsx)(c.b,{className:"petition_groups_list_btn",to:"/petition_group/".concat(e.id),children:"View"}),Object(x.jsxs)("span",{children:["id:",e.id]}),Object(x.jsx)("span",{children:e.group_name})]},e.id)}))})]})},U=function(e){var t=e.onSubmit,i=e.petitionGroupId,r=Object(p.a)(),s=r.register,n=r.unregister,a=r.handleSubmit,c=r.formState.errors,o=r.watch;return Object(x.jsxs)("form",{className:"input_form",onSubmit:a((function(e){console.log(e),t(e)})),children:[Object(x.jsxs)(O.Provider,{value:{register:s,unregister:n,watch:o,errors:c},children:[Object(x.jsx)(v,{type:"textarea",varName:"petition_text",visibleName:"petition text"}),Object(x.jsx)(f,{varName:"petition_group_id",varValue:i})]}),Object(x.jsx)("input",{className:"form_submit_btn",type:"submit",value:"Add New Petition"})]})},G=function(e){var t=e.petitionGroupId,i=Object(r.useRef)({petition_group_id:t}),s=m({getUrl:"/api/petitions",postUrl:"/api/petitions",getRequestParams:i.current}),n=s.data,a=s.addData,c=s.loading,o=s.error;return n&&n.forEach((function(e){return console.log(e)})),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("br",{}),Object(x.jsx)("strong",{children:"Petitions"}),Object(x.jsx)(k,{loading:c,error:o}),Object(x.jsx)(U,{petitionGroupId:t,onSubmit:a}),Object(x.jsx)("ul",{className:"users_list_group",children:n&&n.length>0?n.map((function(e,t){return Object(x.jsx)("li",{className:"users_list_item",children:Object(x.jsxs)("p",{children:["Petition Text: ",e.petition_text]})},t)})):Object(x.jsx)("p",{children:"This group has no petition yet."})})]})},T=function(e){var t=e.petitionGroupId,i=Object(r.useRef)({petition_group_id:t}),s=m({getUrl:"/api/members",getRequestParams:i.current}),n=s.data,a=s.loading,c=s.error;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("br",{}),Object(x.jsx)("strong",{children:"Members"}),Object(x.jsx)(k,{loading:a,error:c}),Object(x.jsx)("ul",{className:"users_list_group",children:n&&n.length>0?n.map((function(e){return Object(x.jsx)("li",{className:"users_list_item",children:e.email},e.email)})):Object(x.jsx)("p",{children:"This group has no members yet."})})]})},I=function(e){var t=e.petitionGroup;return Object(x.jsxs)("p",{children:[Object(x.jsx)("strong",{children:"id:"})," ",t.id,Object(x.jsx)("br",{}),Object(x.jsx)("strong",{children:"listserv_email:"})," ",t.listserv_email,Object(x.jsx)("br",{})]})},D=function(e){var t=e.basePath,i=Object(o.e)().pathname.replace(t,""),r=m({getUrl:"/api/petition_groups/".concat(i)}),s=r.data,n=r.loading,a=r.error;return s?Object(x.jsxs)("section",{children:[Object(x.jsxs)("h2",{children:["Petition Group: ",s.group_name]}),Object(x.jsx)(k,{loading:n,error:a}),Object(x.jsx)(I,{petitionGroup:s}),Object(x.jsx)(T,{petitionGroupId:i}),Object(x.jsx)(G,{petitionGroupId:s.id})]}):Object(x.jsx)("section",{})},F=function(e){var t=e.basePath,i=Object(o.e)().pathname.replace(t,"");return Object(x.jsxs)("section",{children:[Object(x.jsx)("h3",{children:"Testing Variable Paths"}),Object(x.jsxs)("p",{children:["subpath: ",i," "]})]})},q=function(){return Object(x.jsx)(c.a,{children:Object(x.jsxs)("div",{className:"App",children:[Object(x.jsx)("h1",{children:"Petition App Debug UI"}),Object(x.jsxs)("nav",{className:"top_nav",children:[Object(x.jsx)(c.b,{className:"nav_link",to:"/users",children:"Users"}),Object(x.jsx)(c.b,{className:"nav_link",to:"/petition_groups",children:"Petition Groups"})]}),Object(x.jsx)(o.a,{path:"/petition_groups",exact:!0,component:w}),Object(x.jsx)(o.a,{path:"/petition_group/",render:function(){return Object(x.jsx)(D,{basePath:"/petition_group/"})}}),Object(x.jsx)(o.a,{path:"/users",exact:!0,component:y}),Object(x.jsx)(o.a,{path:"/testpath/",render:function(){return Object(x.jsx)(F,{basePath:"/testpath/"})}})]})})},A=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,69)).then((function(t){var i=t.getCLS,r=t.getFID,s=t.getFCP,n=t.getLCP,a=t.getTTFB;i(e),r(e),s(e),n(e),a(e)}))};a.a.render(Object(x.jsx)(s.a.StrictMode,{children:Object(x.jsx)(q,{})}),document.getElementById("root")),A()}},[[68,1,2]]]);
//# sourceMappingURL=main.d0871e5f.chunk.js.map